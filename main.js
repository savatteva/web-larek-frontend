(()=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===_typeof(i)?i:String(i)),o)}var n,i}var t=function(){function EventEmitter(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,e){var r;this._events.has(t)||this._events.set(t,new Set),null===(r=this._events.get(t))||void 0===r||r.add(e)}},{key:"off",value:function off(t,e){var r;this._events.has(t)&&(this._events.get(t).delete(e),0===(null===(r=this._events.get(t))||void 0===r?void 0:r.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,e){this._events.forEach((function(r,o){"*"===o&&r.forEach((function(r){return r({eventName:t,data:e})})),(o instanceof RegExp&&o.test(t)||o===t)&&r.forEach((function(t){return t(e)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,e){var r=this;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(t,Object.assign(Object.assign({},o||{}),e||{}))}}}]),EventEmitter}();function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function api_toPrimitive(t,e){if("object"!==api_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==api_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===api_typeof(i)?i:String(i)),o)}var n,i}function LarekAPI_typeof(t){return LarekAPI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LarekAPI_typeof(t)}function LarekAPI_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function LarekAPI_toPrimitive(t,e){if("object"!==LarekAPI_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==LarekAPI_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===LarekAPI_typeof(i)?i:String(i)),o)}var n,i}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function _possibleConstructorReturn(t,e){if(e&&("object"===LarekAPI_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var e=function(t){!function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(LarekApi,t);var e=_createSuper(LarekApi);function LarekApi(t,r,o){var n;return function LarekAPI_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LarekApi),(n=e.call(this,r,o)).cdn=t,n}return function LarekAPI_createClass(t,e,r){return e&&LarekAPI_defineProperties(t.prototype,e),r&&LarekAPI_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(LarekApi,[{key:"getProducts",value:function getProducts(){var t=this;return this.get("/product").then((function(e){return e.items.map((function(e){return Object.assign(Object.assign({},e),{image:t.cdn+e.image})}))}))}},{key:"orderProducts",value:function orderProducts(t){return this.post("/order",t).then((function(t){return t}))}}]),LarekApi}(function(){function Api(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(e=r.headers)&&void 0!==e?e:{})}}return function api_createClass(t,e,r){return e&&api_defineProperties(t.prototype,e),r&&api_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(e){var r;return Promise.reject(null!==(r=e.error)&&void 0!==r?r:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(e)})).then(this.handleResponse)}}]),Api}());function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,e){if(isSelector(t)){var r=function ensureAllElements(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(e.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,e);if(r.length>1&&console.warn("selector ".concat(t," return more then one element")),0===r.length)throw new Error("selector ".concat(t," return nothing"));return r.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function Component_typeof(t){return Component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Component_typeof(t)}function Component_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Component_toPrimitive(t,e){if("object"!==Component_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Component_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Component_typeof(i)?i:String(i)),o)}var n,i}var r=function(){function Component(t){!function Component_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function Component_createClass(t,e,r){return e&&Component_defineProperties(t.prototype,e),r&&Component_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"toggleClass",value:function toggleClass(t,e,r){t.classList.toggle(e,r)}},{key:"setText",value:function setText(t,e){t&&(t.textContent=String(e))}},{key:"setDisabled",value:function setDisabled(t,e){t&&(e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))}},{key:"setImage",value:function setImage(t,e,r){t&&(t.src=e,r&&(t.alt=r))}},{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function Product_typeof(t){return Product_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Product_typeof(t)}function Product_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Product_toPrimitive(t,e){if("object"!==Product_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Product_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Product_typeof(i)?i:String(i)),o)}var n,i}function Product_setPrototypeOf(t,e){return Product_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Product_setPrototypeOf(t,e)}function Product_createSuper(t){var e=function Product_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Product_getPrototypeOf(t);if(e){var n=Product_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Product_possibleConstructorReturn(t,e){if(e&&("object"===Product_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Product_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Product_getPrototypeOf(t){return Product_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Product_getPrototypeOf(t)}var o=function(t){!function Product_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Product_setPrototypeOf(t,e)}(Product,t);var e=Product_createSuper(Product);function Product(t,r,o){var n;return function Product_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Product),(n=e.call(this,r))._categoryColor={"софт-скил":"soft",другое:"other",дополнительное:"additional",кнопка:"button","хард-скил":"hard"},n._title=ensureElement(".".concat(t,"__title"),r),n._image=r.querySelector(".".concat(t,"__image")),n._category=r.querySelector(".".concat(t,"__category")),n._price=r.querySelector(".".concat(t,"__price")),n._description=r.querySelector(".".concat(t,"__text")),n._button=r.querySelector(".".concat(t,"__button")),n._index=r.querySelector(".basket__item-index"),(null==o?void 0:o.onClick)&&(n._button?n._button.addEventListener("click",o.onClick):r.addEventListener("click",o.onClick)),n}return function Product_createClass(t,e,r){return e&&Product_defineProperties(t.prototype,e),r&&Product_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Product,[{key:"title",set:function set(t){this.setText(this._title,t)}},{key:"image",set:function set(t){this.setImage(this._image,t,this.title)}},{key:"price",set:function set(t){t?this.setText(this._price,"".concat(t," синапсов")):this.setText(this._price,"Бесценно")}},{key:"category",set:function set(t){this.setText(this._category,t),this.toggleClass(this._category,"card__category_".concat(this._categoryColor[t]),!0)}},{key:"description",set:function set(t){this.setText(this._description,t)}},{key:"button",get:function get(){return this._button}},{key:"index",set:function set(t){this.setText(this._index,t)}}]),Product}(r);function Model_typeof(t){return Model_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Model_typeof(t)}function Model_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Model_toPrimitive(t,e){if("object"!==Model_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Model_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Model_typeof(i)?i:String(i)),o)}var n,i}var n=function(){function Model(t,e){!function Model_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Model),this.events=e,Object.assign(this,t)}return function Model_createClass(t,e,r){return e&&Model_defineProperties(t.prototype,e),r&&Model_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Model,[{key:"emitChanges",value:function emitChanges(t,e){this.events.emit(t,null!=e?e:{})}}]),Model}();function AppState_typeof(t){return AppState_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AppState_typeof(t)}function AppState_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function AppState_toPrimitive(t,e){if("object"!==AppState_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==AppState_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===AppState_typeof(i)?i:String(i)),o)}var n,i}function AppState_setPrototypeOf(t,e){return AppState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},AppState_setPrototypeOf(t,e)}function AppState_createSuper(t){var e=function AppState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=AppState_getPrototypeOf(t);if(e){var n=AppState_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function AppState_possibleConstructorReturn(t,e){if(e&&("object"===AppState_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function AppState_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function AppState_getPrototypeOf(t){return AppState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},AppState_getPrototypeOf(t)}var i=function(t){!function AppState_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AppState_setPrototypeOf(t,e)}(AppState,t);var e=AppState_createSuper(AppState);function AppState(){var t;return function AppState_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AppState),(t=e.apply(this,arguments))._order={payment:"",email:"",phone:"",address:"",items:[],total:0},t._basket=[],t.formErrors={},t}return function AppState_createClass(t,e,r){return e&&AppState_defineProperties(t.prototype,e),r&&AppState_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(AppState,[{key:"products",get:function get(){return this._products},set:function set(t){this._products=t}},{key:"order",get:function get(){return this._order},set:function set(t){this._order=t}},{key:"basket",get:function get(){return this._basket}},{key:"id",get:function get(){return this.preview},set:function set(t){this.preview=t}},{key:"getProduct",value:function getProduct(t){return this._products.find((function(e){return e.id===t}))}},{key:"preview",set:function set(t){t?this.getProduct(t)&&(this._preview=t):this._preview=null}},{key:"clearBasket",value:function clearBasket(){this._basket.splice(0,this._basket.length)}},{key:"toBasket",value:function toBasket(t){this._basket.includes(t)||this._basket.push(t)}},{key:"deleteFromBasket",value:function deleteFromBasket(t){var e=this.basket.filter((function(e){return e.id!==t.id}));this._basket=e}},{key:"setTotal",value:function setTotal(){return this.basket.reduce((function(t,e){return t+e.price}),0)}},{key:"validateOrder",value:function validateOrder(){var t={};return this._order.payment||(t.payment="Необходимо указать тип оплаты"),this._order.address||(t.address="Необходимо указать адрес"),this.formErrors=t,this.events.emit("formErrors:change",this.formErrors),0===Object.keys(t).length}},{key:"validateContacts",value:function validateContacts(){var t={};return this._order.email||(t.email="Необходимо указать email"),this._order.phone||(t.phone="Необходимо указать телефон"),this.formErrors=t,this.events.emit("formErrors:change",this.formErrors),0===Object.keys(t).length}},{key:"setOrderField",value:function setOrderField(t,e){this._order[t]=e,this.validateOrder()&&this.validateContacts()}}]),AppState}(n);function Modal_typeof(t){return Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Modal_typeof(t)}function Modal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Modal_toPrimitive(t,e){if("object"!==Modal_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Modal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Modal_typeof(i)?i:String(i)),o)}var n,i}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,e,r){var o=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Modal_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},_get.apply(this,arguments)}function Modal_setPrototypeOf(t,e){return Modal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Modal_setPrototypeOf(t,e)}function Modal_createSuper(t){var e=function Modal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Modal_getPrototypeOf(t);if(e){var n=Modal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Modal_possibleConstructorReturn(t,e){if(e&&("object"===Modal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Modal_assertThisInitialized(t)}(this,r)}}function Modal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Modal_getPrototypeOf(t){return Modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Modal_getPrototypeOf(t)}var c=function(t){!function Modal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Modal_setPrototypeOf(t,e)}(Modal,t);var e=Modal_createSuper(Modal);function Modal(t,r){var o;return function Modal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Modal),(o=e.call(this,t)).events=r,o._handleEscape=function(t){"Escape"===t.key&&o.close()},o._closeButton=o.container.querySelector(".modal__close"),o._content=o.container.querySelector(".modal__content"),o._closeButton.addEventListener("click",o.close.bind(Modal_assertThisInitialized(o))),o.container.addEventListener("click",o.close.bind(Modal_assertThisInitialized(o))),o._content.addEventListener("click",(function(t){return t.stopPropagation()})),o}return function Modal_createClass(t,e,r){return e&&Modal_defineProperties(t.prototype,e),r&&Modal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"_toggleModal",value:function _toggleModal(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.toggleClass(this.container,"modal_active",t)}},{key:"open",value:function open(){this._toggleModal(),document.addEventListener("keydown",this._handleEscape),this.events.emit("modal:open")}},{key:"close",value:function close(){this._toggleModal(!1),document.removeEventListener("keydown",this._handleEscape),this.content=null,this.events.emit("modal:close")}},{key:"render",value:function render(t){return _get(Modal_getPrototypeOf(Modal.prototype),"render",this).call(this,t),this.open(),this.container}}]),Modal}(r);function Basket_typeof(t){return Basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Basket_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return Basket_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Basket_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return Basket_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Basket_arrayLikeToArray(t,e)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Basket_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Basket_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Basket_toPrimitive(t,e){if("object"!==Basket_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Basket_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Basket_typeof(i)?i:String(i)),o)}var n,i}function Basket_setPrototypeOf(t,e){return Basket_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Basket_setPrototypeOf(t,e)}function Basket_createSuper(t){var e=function Basket_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Basket_getPrototypeOf(t);if(e){var n=Basket_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Basket_possibleConstructorReturn(t,e){if(e&&("object"===Basket_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Basket_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Basket_getPrototypeOf(t){return Basket_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Basket_getPrototypeOf(t)}var a=function(t){!function Basket_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Basket_setPrototypeOf(t,e)}(Basket,t);var e=Basket_createSuper(Basket);function Basket(t,r){var o;return function Basket_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Basket),(o=e.call(this,t)).events=r,o._list=ensureElement(".basket__list",o.container),o._total=o.container.querySelector(".basket__price"),o._button=o.container.querySelector(".basket__button"),o._button&&o._button.addEventListener("click",(function(){r.emit("order:open")})),o.products=[],o}return function Basket_createClass(t,e,r){return e&&Basket_defineProperties(t.prototype,e),r&&Basket_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Basket,[{key:"selected",set:function set(t){this.setDisabled(this._button,t<=0)}},{key:"products",set:function set(t){var e;(e=this._list).replaceChildren.apply(e,_toConsumableArray(t))}},{key:"total",set:function set(t){this.setText(this._total,"".concat(t)+" синапсисов")}}]),Basket}(r);function Form_typeof(t){return Form_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Form_typeof(t)}function Form_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Form_toPrimitive(t,e){if("object"!==Form_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Form_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Form_typeof(i)?i:String(i)),o)}var n,i}function Form_get(){return Form_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,e,r){var o=function Form_superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Form_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Form_get.apply(this,arguments)}function Form_setPrototypeOf(t,e){return Form_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Form_setPrototypeOf(t,e)}function Form_createSuper(t){var e=function Form_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Form_getPrototypeOf(t);if(e){var n=Form_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Form_possibleConstructorReturn(t,e){if(e&&("object"===Form_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Form_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Form_getPrototypeOf(t){return Form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Form_getPrototypeOf(t)}var __rest=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]])}return r},u=function(t){!function Form_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Form_setPrototypeOf(t,e)}(Form,t);var e=Form_createSuper(Form);function Form(t,r){var o;return function Form_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Form),(o=e.call(this,t)).events=r,o.submitBtn=ensureElement(".button",o.container),o._errors=ensureElement(".form__errors",o.container),o.formName=o.container.getAttribute("name"),o.container.addEventListener("submit",(function(t){t.preventDefault(),r.emit("".concat(o.formName,":submit"))})),o.container.addEventListener("input",(function(t){var e=t.target,r=e.name,n=e.value;o.onInputChange(r,n)})),o}return function Form_createClass(t,e,r){return e&&Form_defineProperties(t.prototype,e),r&&Form_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Form,[{key:"onInputChange",value:function onInputChange(t,e){this.events.emit("".concat(this.formName,".").concat(String(t),":change"),{field:t,value:e})}},{key:"valid",set:function set(t){this.setDisabled(this.submitBtn,!t)}},{key:"errors",set:function set(t){this.setText(this._errors,t)}},{key:"close",value:function close(){this._form.reset()}},{key:"render",value:function render(t){var e=t.valid,r=t.errors,o=__rest(t,["valid","errors"]);return Form_get(Form_getPrototypeOf(Form.prototype),"render",this).call(this,{valid:e,errors:r}),Object.assign(this,o),this.container}}]),Form}(r);function OrderForm_typeof(t){return OrderForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrderForm_typeof(t)}function OrderForm_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function OrderForm_toPrimitive(t,e){if("object"!==OrderForm_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==OrderForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===OrderForm_typeof(i)?i:String(i)),o)}var n,i}function OrderForm_setPrototypeOf(t,e){return OrderForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},OrderForm_setPrototypeOf(t,e)}function OrderForm_createSuper(t){var e=function OrderForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=OrderForm_getPrototypeOf(t);if(e){var n=OrderForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function OrderForm_possibleConstructorReturn(t,e){if(e&&("object"===OrderForm_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function OrderForm_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function OrderForm_getPrototypeOf(t){return OrderForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},OrderForm_getPrototypeOf(t)}var s=function(t){!function OrderForm_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OrderForm_setPrototypeOf(t,e)}(OrderForm,t);var e=OrderForm_createSuper(OrderForm);function OrderForm(t,r){var o;return function OrderForm_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,OrderForm),(o=e.call(this,t,r)).cash=o.container.querySelector('button[name="cash"]'),o.card=o.container.querySelector('button[name="card"]'),o._address=t.elements.namedItem("address"),o.cash.addEventListener("click",(function(){o.toggleCash(),o.toggleCard(!1),o.setPayment(o.cash)})),o.card.addEventListener("click",(function(){o.toggleCard(),o.toggleCash(!1),o.setPayment(o.card)})),o}return function OrderForm_createClass(t,e,r){return e&&OrderForm_defineProperties(t.prototype,e),r&&OrderForm_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrderForm,[{key:"address",set:function set(t){this._address.value=t}},{key:"toggleCard",value:function toggleCard(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.toggleClass(this.card,"button_alt-active",t)}},{key:"toggleCash",value:function toggleCash(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.toggleClass(this.cash,"button_alt-active",t)}},{key:"setPayment",value:function setPayment(t){t.classList.contains("button_alt-active")&&"card"===t.getAttribute("name")?this._payment="card":this._payment="cash",this.events.emit("payment:choosed",{payment:this._payment})}}]),OrderForm}(u);function ContactsForm_typeof(t){return ContactsForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ContactsForm_typeof(t)}function ContactsForm_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function ContactsForm_toPrimitive(t,e){if("object"!==ContactsForm_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==ContactsForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===ContactsForm_typeof(i)?i:String(i)),o)}var n,i}function ContactsForm_setPrototypeOf(t,e){return ContactsForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},ContactsForm_setPrototypeOf(t,e)}function ContactsForm_createSuper(t){var e=function ContactsForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=ContactsForm_getPrototypeOf(t);if(e){var n=ContactsForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function ContactsForm_possibleConstructorReturn(t,e){if(e&&("object"===ContactsForm_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function ContactsForm_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ContactsForm_getPrototypeOf(t){return ContactsForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ContactsForm_getPrototypeOf(t)}var f=function(t){!function ContactsForm_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ContactsForm_setPrototypeOf(t,e)}(ContactsForm,t);var e=ContactsForm_createSuper(ContactsForm);function ContactsForm(t,r){var o;return function ContactsForm_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),(o=e.call(this,t,r))._email=t.elements.namedItem("email"),o._phone=t.elements.namedItem("phone"),o}return function ContactsForm_createClass(t,e,r){return e&&ContactsForm_defineProperties(t.prototype,e),r&&ContactsForm_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ContactsForm,[{key:"phone",set:function set(t){this._phone.value=t}},{key:"email",set:function set(t){this._email.value=t}}]),ContactsForm}(u);function Success_typeof(t){return Success_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Success_typeof(t)}function Success_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Success_toPrimitive(t,e){if("object"!==Success_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Success_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Success_typeof(i)?i:String(i)),o)}var n,i}function Success_setPrototypeOf(t,e){return Success_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Success_setPrototypeOf(t,e)}function Success_createSuper(t){var e=function Success_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Success_getPrototypeOf(t);if(e){var n=Success_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Success_possibleConstructorReturn(t,e){if(e&&("object"===Success_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Success_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Success_getPrototypeOf(t){return Success_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Success_getPrototypeOf(t)}var l=function(t){!function Success_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Success_setPrototypeOf(t,e)}(Success,t);var e=Success_createSuper(Success);function Success(t,r){var o;return function Success_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Success),(o=e.call(this,t))._close=ensureElement(".order-success__close",o.container),o._total=ensureElement(".order-success__description",o.container),(null==r?void 0:r.onClick)&&o._close.addEventListener("click",r.onClick),o}return function Success_createClass(t,e,r){return e&&Success_defineProperties(t.prototype,e),r&&Success_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Success,[{key:"total",set:function set(t){this.setText(this._total,"Списано ".concat(t," синапсов"))}}]),Success}(r);function Page_typeof(t){return Page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Page_typeof(t)}function Page_toConsumableArray(t){return function Page_arrayWithoutHoles(t){if(Array.isArray(t))return Page_arrayLikeToArray(t)}(t)||function Page_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Page_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return Page_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Page_arrayLikeToArray(t,e)}(t)||function Page_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Page_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Page_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=o.key,i=void 0,i=function Page_toPrimitive(t,e){if("object"!==Page_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==Page_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Page_typeof(i)?i:String(i)),o)}var n,i}function Page_setPrototypeOf(t,e){return Page_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Page_setPrototypeOf(t,e)}function Page_createSuper(t){var e=function Page_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=Page_getPrototypeOf(t);if(e){var n=Page_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Page_possibleConstructorReturn(t,e){if(e&&("object"===Page_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Page_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Page_getPrototypeOf(t){return Page_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Page_getPrototypeOf(t)}var p=function(t){!function Page_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Page_setPrototypeOf(t,e)}(Page,t);var e=Page_createSuper(Page);function Page(t,r){var o;return function Page_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Page),(o=e.call(this,t)).events=r,o._counter=ensureElement(".header__basket-counter"),o._catalog=ensureElement(".gallery"),o._wrapper=ensureElement(".page__wrapper"),o._basket=ensureElement(".header__basket"),o._basket.addEventListener("click",(function(){o.events.emit("basket:open")})),o}return function Page_createClass(t,e,r){return e&&Page_defineProperties(t.prototype,e),r&&Page_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Page,[{key:"counter",set:function set(t){this.setText(this._counter,String(t))}},{key:"catalog",set:function set(t){var e;(e=this._catalog).replaceChildren.apply(e,Page_toConsumableArray(t))}},{key:"locked",set:function set(t){this.toggleClass(this._wrapper,"page__wrapper_locked",t)}}]),Page}(r),y=new t,d=ensureElement("#card-catalog"),_=new p(document.body,y),m=new c(ensureElement("#modal-container"),y),b=ensureElement("#card-preview"),v=ensureElement("#card-basket"),h=new e("https://larek-api.nomoreparties.co/content/weblarek","https://larek-api.nomoreparties.co/api/weblarek"),P=new i({},y);h.getProducts().then((function(t){P.products=t,y.emit("products:loaded",t)})).catch((function(t){return console.log(t)})),y.on("products:loaded",(function(){_.catalog=P.products.map((function(t){return new o("card",cloneTemplate(d),{onClick:function onClick(){return y.emit("card:select",t)}}).render({image:t.image,title:t.title,category:t.category,price:t.price})}))})),y.on("modal:open",(function(){_.locked=!0})),y.on("modal:close",(function(){_.locked=!1})),y.on("card:select",(function(t){var e=P.getProduct(t.id),r=new o("card",cloneTemplate(b),{onClick:function onClick(){P.basket.includes(t)?(r.setText(r.button,"В корзину"),y.emit("card:deletefromcart",t)):(y.emit("card:addtocart",t),r.setText(r.button,"Удалить из корзины"))}});null===e.price&&r.setDisabled(r.button,!0),P.basket.includes(t)?r.setText(r.button,"Удалить из корзины"):r.setText(r.button,"В корзину"),m.render({content:r.render({image:t.image,title:t.title,category:t.category,price:t.price,description:t.description})})})),y.on("card:addtocart",(function(t){P.toBasket(t),_.counter=P.basket.length}));var g=new a(cloneTemplate(ensureElement("#basket")),y);y.on("basket:open",(function(){var t=P.basket.map((function(t,e){return new o("card",cloneTemplate(v),{onClick:function onClick(){y.emit("card:deletefromcart",t),y.emit("basket:open")}}).render({price:t.price,title:t.title,id:t.id,index:e+=1})}));m.render({content:g.render({products:t,total:P.setTotal(),selected:t.length})})})),y.on("card:deletefromcart",(function(t){P.deleteFromBasket(t),_.counter=P.basket.length}));var O=new s(cloneTemplate(ensureElement("#order")),y),S=new f(cloneTemplate(ensureElement("#contacts")),y);y.on("order:open",(function(){P.order.total=P.setTotal(),P.order.items=P.basket.map((function(t){return t.id})),m.render({content:O.render({valid:!1,errors:[]})})})),y.on(/^order\..*:change/,(function(t){P.setOrderField(t.field,t.value)})),y.on(/^contacts\..*:change/,(function(t){P.setOrderField(t.field,t.value)})),y.on("payment:choosed",(function(t){P.setOrderField("payment",t.payment)})),y.on("formErrors:change",(function(t){var e=t.payment,r=t.address;O.valid=!e&&!r,O.errors=Object.values({address:r,payment:e}).filter((function(t){return!!t})).join("; ");var o=t.phone,n=t.email;S.valid=!o&&!n,S.errors=Object.values({phone:o,email:n}).filter((function(t){return!!t})).join("; ")})),y.on("order:submit",(function(){m.render({content:S.render({valid:!1,errors:[]})})}));var k=ensureElement("#success");y.on("contacts:submit",(function(){h.orderProducts(P.order).then((function(t){P.clearBasket(),P.order={payment:"",email:"",phone:"",address:"",items:[],total:P.order.total},_.counter=P.basket.length;var e=new l(cloneTemplate(k),{onClick:function onClick(){m.close(),P.order.total=0}});m.render({content:e.render({total:P.order.total})})})).catch((function(t){console.log(t)}))})),y.onAll((function(t){console.log(t.eventName,t.data)}))})();
//# sourceMappingURL=main.js.map